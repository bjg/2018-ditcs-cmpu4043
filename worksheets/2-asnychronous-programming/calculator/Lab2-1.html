<!--
    Student: Mohamad Zabad
    ID: C15745405
-->
<head>
    <style>
        body{
            font-family: Arial,Helvetica Neue,Helvetica,sans-serif; 
        }
        .screen{
            position: relative;
            max-width: 357px;
            border: 2px solid #AAAAAA;
            border-radius: 5px;
            border-color:#EEEEEE;
            box-shadow: -3px -3px #AAAAAA;
            margin: 0 16px 0 20px;
            background: #ffffff;
        }
        .text-on-screen{
            display: block;
            text-align: right;
            color: #AAAAAA;
            padding: 5px 3px 5px 0;
            font-size: 36px;
        }
        .button-container{    
            max-width: 350px;
            margin-top: 15px;
            margin-right: 20px;
            margin-bottom: 20px;
            padding-left: 20px;
        }
        .button{
            display: inline-block;
            width: 78px;
            height: 35px;
            background-color: #C0C0C0;
            border: 1px solid #ADADAD;
            border-radius: 8px;
            box-shadow: 3px 3px #6C6C6C;
            margin-top: 10px;
            text-align: center
        }
        .calculator{
            display: inline-block;
            margin: 40px 0 0 45px;
            padding: 25px 0px 10px 0px;
            border: 2px solid black;
            border-radius: 15px;
            background: #F7F7F7;
        }
        .middle-button-r{
            margin-right: 5px;
        }
        .middle-button-l{
            margin-right: 5px;
            margin-left: 5px;
        }
        .text-button{
            display: block;
            padding-top: 6px;
            font-size: 21px;
        }
        .button:hover{
            background: rgb(167, 167, 167);
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="screen">
            <div id="text-on-screen" class="text-on-screen">
                0
            </div>
        </div>
        <div class="button-container">
            
            <div class="button" onclick="change_value('')"><span class="text-button">(</span></div>
            <div class="button middle-button-l" onclick="change_value('')" ><span class="text-button">)</span></div>
            <div class="button middle-button-r" onclick="change_value('-1')"><span class="text-button">&#177;</span></div>
            <div class="button" onclick="change_value('')"><span class="text-button">&#247;</span></div>

            <div class="button" onclick="change_value('7')"><span class="text-button">7</span></div>
            <div class="button middle-button-l" onclick="change_value('8')"><span class="text-button">8</span></div>
            <div class="button middle-button-r" onclick="change_value('9')"><span class="text-button">9</span></div>
            <div class="button" onclick="change_value('*')"><span class="text-button">x</span></div>
            
            <div class="button" onclick="change_value('4')"><span class="text-button">4</span></div>
            <div class="button middle-button-l" onclick="change_value('5')"><span class="text-button">5</span></div>
            <div class="button middle-button-r" onclick="change_value('6')"><span class="text-button">6</span></div>
            <div class="button" onclick="change_value('-')"><span class="text-button">-</span></div>
            
            <div class="button" onclick="change_value('1')"><span class="text-button">1</span></div>
            <div class="button middle-button-l" onclick="change_value('2')"><span class="text-button">2</span></div>
            <div class="button middle-button-r" onclick="change_value('3')"><span class="text-button">3</span></div>
            <div class="button" onclick="change_value('+')"><span class="text-button">+</span></div>
            
            <div class="button" onclick="change_value('0')"><span class="text-button">0</span></div>
            <div class="button middle-button-l" onclick="change_value('')"><span class="text-button">.</span></div>
            <div class="button middle-button-r" onclick="clrscr()"><span class="text-button">c</span></div>
            <div class="button" onclick="total()"><span class="text-button">=</span></div>
        </div>
    </div>
</body>

<script>
    // Global variable to check which key was pressed last
    let state=0;
    let last_value;
    let value_screen= "0";

    document.addEventListener('keydown', function(event) {
        switch(event.keyCode){
            case 48:
                change_value('0');
                break;
            case 49:
                change_value('1');
                break;
            case 50:
                change_value('2');
                break;
            case 51:
                change_value('3');
                break;
            case 52:
                change_value('4');
                break;
            case 53:
                change_value('5');
                break;
            case 54:
                change_value('6');
                break;
            case 55:
                change_value('7');
                break;
            case 56:
                change_value('8');
                break;
            case 57:
                change_value('9');
                break;
                
            case 67:
                // reset by 'c'
                clrscr();
                break;

            case 96:
                change_value('0');
                break;
            case 97:
                change_value('1');
                break;
            case 98:
                change_value('2');
                break;
            case 99:
                change_value('3');
                break;
            case 100:
                change_value('4');
                break;
            case 101:
                change_value('5');
                break;
            case 102:
                change_value('6');
                break;
            case 103:
                change_value('7');
                break;
            case 104:
                change_value('8');
                break;
            case 105:
                change_value('9');
                break;
            case 106:
                change_value('*');
                break;
            case 107:
                change_value('+');
                break;
            case 109:
                change_value('-');
                break;
            case 111:
                change_value('/');
                break;
            case 189:
                change_value('-');
                break;
            case 191:
                change_value('/');
                break;    
                
            case 90: // key for 'z'
                total();
                break;    
        }
    });

    function clrscr(){
        state=0;
        last_value= undefined;
        value_screen= "0";
        document.getElementById("text-on-screen").innerHTML = value_screen;
    }
    function total(){
        if(last_value !=undefined){
            value_screen+=last_value;
            console.log(value_screen);
            console.log(eval(value_screen));
            document.getElementById("text-on-screen").innerHTML = eval(value_screen);

            last_value= eval(value_screen);
            value_screen="";
            console.log(last_value);
            console.log(value_screen);
        }
    }

    function change_value(value){
        // if(value_screen.length >18){
        //     alert("No space on the screen");
        //     return(0);
        // }
        if(value == '') return;
        if( value == '-' || value == '+' || value == '/' || value == '*'){
            
            if(value_screen.charAt(value_screen.length-1) == '-' || value_screen.charAt(value_screen.length-1) == '+' || value_screen.charAt(value_screen.length-1) == '/' || value_screen.charAt(value_screen.length-1) == '*'){
                if(last_value == 0 || last_value== undefined){
                    alert("FOUND");
                }else{
                    if(value_screen == "0" || value_screen == ""){
                    if(last_value != undefined){
                        value_screen = last_value +" "+ value ;
                        last_value = 0;
                        document.getElementById("text-on-screen").innerHTML = value_screen;    
                    }
                    }else{
                        value_screen+= " "+ last_value;
                        value_screen += " "+ value;
                        last_value = 0;
                        document.getElementById("text-on-screen").innerHTML = value_screen;
                    }    
                }
                
            }else{
                if(value_screen == "0" || value_screen == ""){
                    if(last_value != undefined){
                        value_screen = last_value +" "+ value ;
                        last_value = 0;
                        document.getElementById("text-on-screen").innerHTML = value_screen;    
                    }
                }else{
                    value_screen+= " "+ last_value;
                    value_screen += " "+ value;
                    last_value = 0;
                    document.getElementById("text-on-screen").innerHTML = value_screen;
                }
            }
        }else if(value == '-1'){
            if(value_screen == null || value_screen == ''){
                value_screen = parseInt(last_value) * (-1);
                last_value = 0;
                document.getElementById("text-on-screen").innerHTML = value_screen;
            }else{ 
                alert(value_screen);
                value_screen+= " "+ last_value;
                alert(value_screen);
                value_screen = eval(value_screen);
                value_screen = value_screen * (-1);
                document.getElementById("text-on-screen").innerHTML = value_screen;
            }
            
        }else{ // it's a number

            //alert(last_value);
            if(last_value == undefined) {
                last_value = parseInt(value);
                
            }else{
                last_value = last_value*10 + parseInt(value);
                //alert(last_value);
            }

            
            if(value_screen == "0" || value_screen == ""){
                document.getElementById("text-on-screen").innerHTML= last_value;
                value_screen = "";
            }else{
                document.getElementById("text-on-screen").innerHTML= value_screen + " " +last_value;
            }
        }
        
    }

    window.onload = function(){
        
    } // end window on load funtion
</script>