<!--
Student Name: Lauren Keenan Brennan
Student Number: C15434102
-->
<!DOCTYPE html>
<html>
	<head>
		<script>
		function onload(){
			
			/*List of objects having the following user attributes:
				Username
				City
				Zipcode*/
			fetch('https://jsonplaceholder.typicode.com/users')
			.then(response => response.json())
			.then(json => json.map(singleEntity => user= 
				{username: singleEntity.username, city: singleEntity.address.city,zip:singleEntity.address.zipcode}))
			.then(mappedJson => console.log(mappedJson))
			
			//Show the number of users having only zipcodes starting with the number 2 or the number 5
			fetch('https://jsonplaceholder.typicode.com/users')
			.then(response => response.json())
			.then(json => json.map(singleEntity => user= 
				{zip:singleEntity.address.zipcode}))
			.then(mappedJson => mappedJson.filter(user => user.zip.charAt(0) == 2 ||user.zip.charAt(0) == 5 ))
			.then(filteredJson => console.log("Number of entries with zip codes beginning with 2 or 5: " + filteredJson.length))
			
			//List all of the post titles having more than six words
			fetch('https://jsonplaceholder.typicode.com/posts')
			.then(response => response.json())
			.then(json => json.map(singleEntity => posts=
				{title: singleEntity.title}))
			.then(mappedJson => mappedJson.filter(posts => posts.title.split(" ").length - 1 > 6))
			.then(filteredJson => console.log(filteredJson))
			
			//Show a word frequency map for all of the body contents of the posts
			fetch('https://jsonplaceholder.typicode.com/posts')
			.then(response => response.json())
			.then(json => json.map(singleEntity => singleEntity.body))
			.then(mappedJson => mappedJson.reduce(
				(accumulator, currentValue,) => accumulator + ' ' + currentValue))
			.then(reducedJson => reducedJson.split('\n'))
			.then(reducedJson => reducedJson.reduce(
				(accumulator, currentValue) => accumulator + ' ' + currentValue))
			.then(reducedStrings => reducedStrings.split(" "))
			.then(reducedStrings => reducedStrings.reduce(
				(countW, currentVal ) => {
					if(typeof countW[currentVal] !== "undefined"){
						countW[currentVal] += 1;
						return countW;
					}
					else{
						countW[currentVal] = 1;
						return countW;
					}
				},{}))
			.then(mappedReduced => console.log(mappedReduced))
		}
		
		</script>
	</head>
	<body onload="onload()">
	</body>
</html>
