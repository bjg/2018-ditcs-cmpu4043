(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(281)},281:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(13),i=a.n(n),l=a(36),o=a(37),u=a(41),c=a(38),g=a(40),d=a(23),m=a(48),h=a.n(m),f=a(16),p=a.n(f),b=a(55),E=a.n(b),y=a(11),v=a(17),w=a.n(v),x=a(49),T=a.n(x),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={loginOpen:!0,registerOpen:!1,passwordErrorText:"",usernameErrorText:"",registerUsernameErrorText:"",registerEmailErrorText:"",registerPasswordErrorText:"",registerReEnterPasswordErrorText:"",imageFile:null,registerImage:"https://www.qualiscare.com/wp-content/uploads/2017/08/default-user.png",logged:!1},a.handleOpen=function(){a.setState({loginOpen:!0})},a.handleClose=function(e){""===a.refs.loginEmail.getValue()?a.setState({usernameErrorText:"This field is required"}):a.setState({usernameErrorText:""}),""===a.refs.loginPassword.getValue()?a.setState({passwordErrorText:"This field is required"}):a.setState({passwordErrorText:""}),""!==a.refs.loginEmail.getValue()&&""!==a.refs.loginPassword.getValue()&&y.auth().signInWithEmailAndPassword(a.refs.loginEmail.getValue(),a.refs.loginPassword.getValue()).then(function(e){localStorage.setItem("chatRoomLogged","1"),(0,a.props.isLoggedHandler)("1")}).catch(function(e){var t=e.message;alert(t)})},a.handleRegisterSumbit=function(e){if(""===a.refs.registerUsername.getValue()?a.setState({registerUsernameErrorText:"This field is required"}):a.setState({registerUsernameErrorText:""}),""===a.refs.registerEmail.getValue()?a.setState({registerEmailErrorText:"This field is required"}):a.setState({registerEmailErrorText:""}),""===a.refs.registerPassword.getValue()?a.setState({registerPasswordErrorText:"This field is required"}):a.setState({registerPasswordErrorText:""}),""===a.refs.registerReEnterPassword.getValue()?a.setState({registerReEnterPasswordErrorText:"This field is required"}):a.setState({registerReEnterPasswordErrorText:""}),""!==a.refs.registerUsername.getValue()&&""!==a.refs.registerEmail.getValue()&&""!==a.refs.registerPassword.getValue()&&""!==a.refs.registerReEnterPassword.getValue())if(a.refs.registerPassword.getValue()!==a.refs.registerReEnterPassword.getValue())a.setState({registerPasswordErrorText:"Passwords do not Match",registerReEnterPasswordErrorText:"Passwords do not Match"});else{var t=a.refs.registerUsername.getValue(),r=a.backToLogin;y.auth().createUserWithEmailAndPassword(a.refs.registerEmail.getValue(),a.refs.registerPassword.getValue()).then(function(e){null!==y.auth().currentUser&&(null!==a.state.imageFile?y.storage().ref("users").child(y.auth().currentUser.uid).put(a.state.imageFile).then(function(e){y.storage().ref("users").child(y.auth().currentUser.uid).getDownloadURL().then(function(e){y.database().ref("users/"+y.auth().currentUser.uid).set({username:t,profilePicture:e}).then(function(e){r()})})}).catch(function(e){var t=e.message;alert(t)}):y.database().ref("users/"+y.auth().currentUser.uid).set({username:t}).then(function(e){r()}).catch(function(e){var t=e.message;alert(t)}))}).catch(function(e){var t=e.message;alert(t)})}},a.register=function(){a.setState({loginOpen:!1,registerOpen:!0})},a.backToLogin=function(){a.setState({loginOpen:!0,registerOpen:!1,registerImage:"http://popwrapped.com/images/default/user-blank.png"})},a.readImage=function(e){var t=e.target.files[0].type.split("/")[1];if("jpeg"===t||"jpg"===t||"png"===t||"svg"===t||"bmp"===t){if(e.target.files&&e.target.files[0]){var r=new FileReader;r.onload=function(e){this.setState({registerImage:e.target.result})}.bind(Object(d.a)(Object(d.a)(a))),a.setState({imageFile:e.target.files[0]}),r.readAsDataURL(e.target.files[0])}}else alert("This is not a valid Image!")},a}return Object(g.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){document.body.style.backgroundImage="url('https://66.media.tumblr.com/c8614a53f5abccf81835671a62cde02a/tumblr_opy8alC1rj1u25kiio1_500.gif')",document.body.style.backgroundSize="cover";var e=[s.a.createElement(p.a,{label:"Log In",primary:!0,keyboardFocused:!0,onClick:this.handleClose}),s.a.createElement(p.a,{label:"Register",primary:!0,keyboardFocused:!0,onClick:this.register})],t=[s.a.createElement(p.a,{label:"Submit",primary:!0,keyboardFocused:!0,onClick:this.handleRegisterSumbit}),s.a.createElement(p.a,{label:"Back",primary:!0,keyboardFocused:!0,onClick:this.backToLogin})];return s.a.createElement(E.a,null,s.a.createElement("div",null,s.a.createElement(h.a,{title:"Log In to Join the ChatRoom",actions:e,modal:!1,open:this.state.loginOpen,onRequestClose:this.handleClose.bind(this)},s.a.createElement(w.a,{ref:"loginEmail",hintText:"Email",floatingLabelText:"Email",errorText:this.state.usernameErrorText}),s.a.createElement("br",null),s.a.createElement(w.a,{ref:"loginPassword",hintText:"Password",floatingLabelText:"Password",type:"password",errorText:this.state.passwordErrorText}))),s.a.createElement("div",{style:{display:"inline-block"}},s.a.createElement(h.a,{title:"Register for the the ChatRoom",actions:t,modal:!1,open:this.state.registerOpen,onRequestClose:this.handleRegisterSumbit.bind(this)},s.a.createElement("div",{style:{display:"inline-block",width:"50%"}},s.a.createElement(w.a,{ref:"registerUsername",hintText:"Username",floatingLabelText:"Username",errorText:this.state.registerUsernameErrorText}),s.a.createElement("br",null),s.a.createElement(w.a,{ref:"registerEmail",hintText:"Email",floatingLabelText:"Email",type:"email",errorText:this.state.registerEmailErrorText}),s.a.createElement("br",null),s.a.createElement(w.a,{ref:"registerPassword",hintText:"Password",floatingLabelText:"Password",type:"password",errorText:this.state.registerPasswordErrorText}),s.a.createElement("br",null),s.a.createElement(w.a,{ref:"registerReEnterPassword",hintText:"Re-Enter Password",floatingLabelText:"Re-Enter Password",type:"password",errorText:this.state.registerReEnterPasswordErrorText}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(p.a,{ref:"profilePicture",label:"Choose a Profile Image",secondary:!0,containerElement:"label",labelPosition:"left",style:{border:"1px solid"}},s.a.createElement("input",{type:"file",accept:".jpg,.png,.bmp,.jpeg,.svg",onChange:this.readImage.bind(this),style:{position:"absolute",opacity:0}}))),s.a.createElement("div",{style:{display:"inline-block",width:"50%",marginBottom:"5em"}},s.a.createElement(T.a,{src:this.state.registerImage,style:{margin:"0 auto",display:"block"},size:200})))))}}]),t}(s.a.Component),O=a(114),k=a.n(O),I=a(54),P=a.n(I),C=a(50),L=a(115),R=a.n(L),_=a(80),U=a.n(_),j=a(116),V=a.n(j),A=a(117),q=a.n(A),M=a(118),D=a.n(M),F=a(79),B=a.n(F),H=a(81),z=a.n(H),W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={userListItems:[],messagesListItems:[],signOutOpen:!1,currentChat:"global",currentUser:null,textbox:"",deleteOpen:!1,clickedIndex:null,anchorEl:null,defaultImage:"https://www.qualiscare.com/wp-content/uploads/2017/08/default-user.png",globeImage:"http://pngimg.com/uploads/globe/globe_PNG33.png"},a.signOut=function(e){var t=a.props.isLoggedHandler;y.auth().signOut().then(function(){localStorage.setItem("chatRoomLogged","0"),t("0")}).catch(function(e){var t=e.message;alert(t)})},a.changeSignOutState=function(){!1===a.state.signOutOpen?a.setState({signOutOpen:!0}):a.setState({signOutOpen:!1})},a.handleDelete=function(e){a.state.currentUser.userId===e.currentTarget.getAttribute("ownedby")&&a.setState({deleteOpen:!0,anchorEl:e.currentTarget})},a.handleDeleteRequestClose=function(){a.setState({deleteOpen:!1})},a.sendMessage=function(e){""!==a.state.textbox&&13===e.keyCode&&(y.database().ref("messages/").child(a.state.currentChat).push({sent_by:a.state.currentUser,text:a.state.textbox}),a.setState({textbox:"",anchorEl:null}))},a.deleteMessage=function(e){y.database().ref("messages/").child(a.state.currentChat).child(a.state.anchorEl.id).remove(),a.setState({deleteOpen:!1,anchorEl:null})},a.changeChat=function(e){var t="";t=null===e.currentTarget.getAttribute("userid")?"global":a.uniqueValueFromTwoStrings(e.currentTarget.getAttribute("userid"),a.state.currentUser.userId),y.database().ref("messages/").child(t).on("value",function(e){var r=[];e.forEach(function(e){r.push({id:e.key,sent_by_username:e.val().sent_by.username,sent_by_id:e.val().sent_by.userId,text:e.val().text,image:e.val().sent_by.profilePicture})}),a.setState({messagesListItems:r,currentChat:t})})},a.uniqueValueFromTwoStrings=function(e,t){for(var a=z()(e),r=z()(t),s="",n=0;n<a.length;n++)s+=(a.charCodeAt(n)+r.charCodeAt(n)).toString(16);return s},a.updateTextBox=function(e){a.setState({textbox:e.target.value})},a.scrollToBottom=function(){a.refs.endOfMessages.scrollIntoView({behavior:"auto"})},a}return Object(g.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.auth().onAuthStateChanged(function(t){if(t){var a=null,r=null;y.database().ref("users/").on("value",function(s){var n=[];s.forEach(function(s){if(s.key===t.uid)r=s.key,a=s.val(),n.push({username:"Global Chat",image:e.state.globeImage});else{var i=null;i=void 0===s.val().profilePicture?e.state.defaultImage:s.val().profilePicture,n.push({username:s.val().username,userId:s.key,image:i})}}),void 0===a.profilePicture?e.setState({userListItems:n,currentUser:{userId:r,username:a.username,profilePicture:e.state.defaultImage}}):e.setState({userListItems:n,currentUser:{userId:r,username:a.username,profilePicture:a.profilePicture}})}),y.database().ref("messages/").child(e.state.currentChat).on("value",function(t){var a=[];t.forEach(function(e){void 0===e.val().sent_by.profilePicture?a.push({id:e.key,sent_by_username:e.val().sent_by.username,sent_by_id:e.val().sent_by.userId,text:e.val().text,image:this.state.defaultImage}):a.push({id:e.key,sent_by_username:e.val().sent_by.username,sent_by_id:e.val().sent_by.userId,text:e.val().text,image:e.val().sent_by.profilePicture})}),e.setState({messagesListItems:a})})}else e.signOut()})}},{key:"componentDidUpdate",value:function(){null===this.state.anchorEl&&this.scrollToBottom()}},{key:"render",value:function(){var e=this;document.body.style.backgroundImage=null,document.body.style.backgroundSize=null;var t=[s.a.createElement(p.a,{label:"YES",primary:!0,keyboardFocused:!0,onClick:this.signOut}),s.a.createElement(p.a,{label:"NOPE!",primary:!0,keyboardFocused:!0,onClick:this.changeSignOutState})];return s.a.createElement(E.a,null,s.a.createElement(k.a,{title:"Welcome to the ChatRoom",showMenuIconButton:!1,iconElementRight:s.a.createElement(P.a,{onClick:this.changeSignOutState},s.a.createElement(R.a,null))}),s.a.createElement("br",null),s.a.createElement(h.a,{title:"Are You Sure You Want to Sign Out?",actions:t,modal:!1,open:this.state.signOutOpen}),s.a.createElement("div",{style:{width:"100%"}},s.a.createElement("div",{style:{display:"inline-block",border:"2px solid grey",width:"30%",marginRight:"2%",verticalAlign:"top",height:"80vh",overflow:"auto"}},s.a.createElement(C.List,null,this.state.userListItems.map(function(t){return s.a.createElement("div",null,s.a.createElement(C.ListItem,{userid:t.userId,primaryText:t.username,leftAvatar:s.a.createElement(T.a,{src:t.image}),rightIcon:s.a.createElement(V.a,null),onClick:e.changeChat}),s.a.createElement(U.a,null))}))),s.a.createElement("div",{style:{display:"inline-block",border:"2px solid grey",width:"65%",verticalAlign:"top",height:"80vh"}},s.a.createElement("div",{ref:"globalMessages",style:{maxHeight:"65vh",height:"65vh",overflow:"auto"}},s.a.createElement(C.List,null,this.state.messagesListItems.map(function(t){return s.a.createElement("div",null,s.a.createElement(C.ListItem,{id:t.id,ownedby:t.sent_by_id,onClick:e.handleDelete,secondaryTextLines:2,primaryText:t.sent_by_username,secondaryText:t.text,leftAvatar:s.a.createElement(T.a,{src:t.image})}),s.a.createElement(q.a,{open:e.state.deleteOpen,anchorEl:e.state.anchorEl,anchorOrigin:{horizontal:"left",vertical:"top"},targetOrigin:{horizontal:"left",vertical:"bottom"},onRequestClose:e.handleDeleteRequestClose},s.a.createElement(D.a,null,s.a.createElement(B.a,{primaryText:"Delete",onClick:e.deleteMessage}))),s.a.createElement(U.a,null))}),s.a.createElement("div",{ref:"endOfMessages"}))),s.a.createElement("div",{style:{width:"100%",height:"15%"}},s.a.createElement("div",{style:{margin:"1%",width:"89%",border:"2px solid lightgrey",borderRadius:"25px",display:"inline-block",overflow:"hidden"}},s.a.createElement(w.a,{value:this.state.textbox,hintText:"Enter a Message",style:{width:"95%",margin:"1%"},onKeyDown:this.sendMessage,onChange:this.updateTextBox}))))))}}]),t}(s.a.Component),K=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(c.a)(t).call(this))).isLoggedHandler=e.isLoggedHandler.bind(Object(d.a)(Object(d.a)(e))),e.state={logged:localStorage.getItem("chatRoomLogged")},e}return Object(g.a)(t,e),Object(o.a)(t,[{key:"isLoggedHandler",value:function(e){this.setState({logged:e})}},{key:"render",value:function(){return"1"===this.state.logged?s.a.createElement(W,{isLoggedHandler:this.isLoggedHandler}):s.a.createElement(S,{isLoggedHandler:this.isLoggedHandler})}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("AIzaSyB32m4SSKluSqUC3vEtckO8gm_EeDSjwUM"),y.initializeApp({apiKey:"AIzaSyB32m4SSKluSqUC3vEtckO8gm_EeDSjwUM",authDomain:"chatroom-88216.firebaseapp.com",databaseURL:"https://chatroom-88216.firebaseio.com",projectId:"chatroom-88216",storageBucket:"chatroom-88216.appspot.com",messagingSenderId:"664163485337"}),i.a.render(s.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,2,1]]]);
//# sourceMappingURL=main.98bc4cca.chunk.js.map