<!--
    Student: Mohamad Zabad
    ID: C15745405

    General Idea:

    I tried to take a different approach to the task and not use any arrays
    That way I can save memeory and just rely on accessing the parent divs by
    a generated id and checking for the CSS value of the background.


    I created 3 css classes:
        - box
        - container
        - black

    These classes are assigned to divs that are generated by the javascript.

    First I generate the fist box (because it's appended to the body)
    Then I create the rest of the boxes on the first row
    Then I create the rest of the boxes on the 49 rows left

    Each cell (apart from the ones in the first row) is checking the css values of the background of the ancestors, targeting them by id.

    Main issue I encountered: 
    Setting the background-color to white or #FFFFFF doesn't actually appear in the inspect elements of the div.
    Therefore I set the bg-color to rgb(255,255,247), which is almost a perfect white.

-->
<script>


    // creating the css classes through javascript

    let style = document.createElement('style');
    style.type = 'text/css';
    style.innerHTML = '.box { width : 8px; height : 8px; border : 1px solid black; margin : 1px 0 0 1px; display : inline-block; padding : 0; background-color : #fffff7;} .container{margin: auto; border: 1px solid pink; padding: 0 0 0 4px; width: 1112px;} .black{ background-color: black;}  ';
    
    document.getElementsByTagName('head')[0].appendChild(style);


    window.onload = function() {

        // Function used to determine if the boxes on the first line will be turned on or off
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Function used to add divs with our for loop
        Element.prototype.appendAfter = function (element) {
            element.parentNode.insertBefore(this, element.nextSibling);
        }, false;


        // The container
        let containerdiv = document.createElement('div');
        
        // The container's CSS
        containerdiv.className += "container";
        
        // Appending the container to the body
        document.getElementsByTagName("body")[0].appendChild(containerdiv);


        // The first box
        let firstdiv = document.createElement('div');
        // Adding the class, id and appending       
        firstdiv.className += "box";
        firstdiv.id='box-1-1';
        document.getElementsByTagName("div")[0].appendChild(firstdiv);

        // Random if the box should be black or white
        if(getRandomInt(0,1) == 1){
            firstdiv.classList.add("black");
        }

        // Same process for the rest of the boxes on line (row) 1
        for (div_index = 2; div_index <= 101; div_index++) {
            
            let iDiv = document.createElement('div');
            iDiv.className += "box";
            iDiv.id = 'box-1-'+ div_index;
            if(getRandomInt(0,1) == 1){
                iDiv.classList.add("black");
            }
            

            let parent_div_id =  div_index-1;
            box1= document.getElementById('box-1-'+parent_div_id);
            /* Adds Element AFTER the sibling element */
            iDiv.appendAfter(box1);
        }

        
        // Line (row) 2 to 50
        for(newline_index=2; newline_index<=50; newline_index++){
            for (div_index2 = 1; div_index2 <= 101; div_index2++) {
                if(div_index2 >1){
                    // Not the first column
                    let new_div= document.createElement('div');
                    new_div.className += "box";
                    // The id now will be unter the box-X-Y format instead of box-1-Y 
                    // Where x is the index of the row and Y is the index of the column
                    new_div.id="box-"+newline_index+"-"+div_index2;
                    let parent_div_id = div_index2 - 1;
                    box1= document.getElementById('box-'+newline_index+"-"+parent_div_id);
                    new_div.appendAfter(box1);
                }else{
                    // The first column
                    // We do this because we append this to the sibling that is one row above, not next to it.
                    let new_div= document.createElement('div');
                    new_div.className += "box";
                    new_div.id="box-"+newline_index+"-"+div_index2;
                    let parent_line_id = newline_index - 1;
                    
                    box1= document.getElementById('box-'+parent_line_id+"-101");
                    new_div.appendAfter(box1);
                }    
            }
        }// end of loop
        
        // Re-run through the row 2-50, checking the parent colours and setting them for the boxes
        /*
            The reason why I do a re-run here instead of just adding them from the start is to keep 
            everything clear and separated. Also, it helped during the debugging process, since I changed
            the code quite a bit.
        */
        for(line_index=2; line_index<=50; line_index++){
            let top_line_index = line_index - 1;

            for (div_index3 = 1; div_index3 <= 101; div_index3++){
                if(div_index3 == 1){ 
                    // First column
                    let topleft_col_index = 101;
                    let topleft= document.getElementById('box-'+top_line_index+'-'+topleft_col_index);
                    let top = document.getElementById('box-'+top_line_index+'-'+div_index3);
                    let topright_col_index = div_index3 + 1;
                    let topright=document.getElementById('box-'+top_line_index+'-'+topright_col_index);  
                    
                    // Horrible if statement but it takes into account all cases
                    if( 
                        window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(0, 0, 0)" && window.getComputedStyle(top).getPropertyValue("background-color")  == "rgb(255, 255, 247)" && window.getComputedStyle(topright).getPropertyValue("background-color") == "rgb(0, 0, 0)"
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(0, 0, 0)" && window.getComputedStyle(top).getPropertyValue("background-color") == "rgb(255, 255, 247)"&& window.getComputedStyle(topright).getPropertyValue("background-color") =="rgb(255, 255, 247)" 
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(255, 255, 247)" && window.getComputedStyle(top).getPropertyValue("background-color") =="rgb(0, 0, 0)"  && window.getComputedStyle(topright).getPropertyValue("background-color") == "rgb(0, 0, 0)"
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(255, 255, 247)" && window.getComputedStyle(top).getPropertyValue("background-color") =="rgb(0, 0, 0)"  && window.getComputedStyle(topright).getPropertyValue("background-color") =="rgb(255, 255, 247)"
                    )
                    {
                        document.getElementById("box-"+line_index+"-"+div_index3).classList.add("black");
                    }

                }else if(div_index3 == 101){
                    // last column
                    let topleft_col_index = div_index3 - 1;
                    let topleft = document.getElementById('box-'+top_line_index+'-'+topleft_col_index);

                    let top = document.getElementById('box-'+top_line_index+'-'+div_index3);
                    let topright_col_index = 1;
                    let topright=document.getElementById('box-'+top_line_index+'-'+topright_col_index);
                    
                    
                    if( 
                        window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(0, 0, 0)" && window.getComputedStyle(top).getPropertyValue("background-color")  == "rgb(255, 255, 247)" && window.getComputedStyle(topright).getPropertyValue("background-color") == "rgb(0, 0, 0)"
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(0, 0, 0)" && window.getComputedStyle(top).getPropertyValue("background-color") == "rgb(255, 255, 247)"&& window.getComputedStyle(topright).getPropertyValue("background-color") =="rgb(255, 255, 247)" 
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(255, 255, 247)" && window.getComputedStyle(top).getPropertyValue("background-color") =="rgb(0, 0, 0)"  && window.getComputedStyle(topright).getPropertyValue("background-color") == "rgb(0, 0, 0)"
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(255, 255, 247)" && window.getComputedStyle(top).getPropertyValue("background-color") =="rgb(0, 0, 0)"  && window.getComputedStyle(topright).getPropertyValue("background-color") =="rgb(255, 255, 247)"
                    )
                    {
                        document.getElementById("box-"+line_index+"-"+div_index3).classList.add("black");
                    }
                }else
                {
                    let topleft_col_index = div_index3 - 1;
                    let topleft = document.getElementById('box-'+top_line_index+'-'+topleft_col_index);
                    
                    let top = document.getElementById('box-'+top_line_index+'-'+div_index3);

                    let topright_col_index = div_index3 + 1;
                    let topright=document.getElementById('box-'+top_line_index+'-'+topright_col_index);
                    
                    // Same as above
                    if(
                        window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(0, 0, 0)" && window.getComputedStyle(top).getPropertyValue("background-color")  == "rgb(255, 255, 247)" && window.getComputedStyle(topright).getPropertyValue("background-color") == "rgb(0, 0, 0)"
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(0, 0, 0)" && window.getComputedStyle(top).getPropertyValue("background-color") == "rgb(255, 255, 247)"&& window.getComputedStyle(topright).getPropertyValue("background-color") =="rgb(255, 255, 247)" 
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(255, 255, 247)" && window.getComputedStyle(top).getPropertyValue("background-color") =="rgb(0, 0, 0)"  && window.getComputedStyle(topright).getPropertyValue("background-color") == "rgb(0, 0, 0)"
                        || window.getComputedStyle(topleft).getPropertyValue("background-color") == "rgb(255, 255, 247)" && window.getComputedStyle(top).getPropertyValue("background-color") =="rgb(0, 0, 0)"  && window.getComputedStyle(topright).getPropertyValue("background-color") =="rgb(255, 255, 247)"
                        ){
                        document.getElementById("box-"+line_index+"-"+div_index3).classList.add("black");

                    }

                }
            }
        }

        
    };
</script>